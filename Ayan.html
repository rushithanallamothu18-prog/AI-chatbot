<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ayan - College Chatbot</title>
<style>
/* Global Styles */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: linear-gradient(135deg, #001f3f, #000000, #d3d3d3);
  font-family: 'Poppins', sans-serif;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}
.container {
  width: 100%;
  max-width: 420px;
  background: rgba(255, 255, 255, 0.97);
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding: 25px 20px;
  transition: all 0.5s ease;
}
.hidden { display: none; }

/* Welcome Text */
#welcome-text {
  text-align: center;
  font-size: 1.5em;
  margin-bottom: 25px;
  font-weight: bold;
  color: #000;
}

/* Inputs & Buttons */
input, select {
  padding: 12px;
  margin-bottom: 15px;
  border-radius: 8px;
  border: 1px solid #ccc;
  width: 100%;
  font-size: 1em;
  transition: 0.3s;
}
input:focus, select:focus {
  border-color: #001f3f;
  outline: none;
  box-shadow: 0 0 5px rgba(0,31,63,0.3);
}

button {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 1em;
  color: white;
  background: linear-gradient(135deg, #001f3f, #000000, #d3d3d3);
  transition: all 0.3s;
}
button:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }

.error {
  color: red;
  font-size: 0.9em;
  margin-bottom: 10px;
  text-align: center;
}

/* Toggle Buttons */
.toggle-buttons {
  display: flex;
  margin-bottom: 15px;
  border-radius: 10px;
  overflow: hidden;
  border: 2px solid black;
}
.toggle-buttons button {
  flex: 1;
  padding: 10px 0;
  background: white;
  color: black;
  border: none;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}
.toggle-buttons button.active {
  background: black;
  color: white;
}

/* Forgot Password Link */
.forgot-link {
  text-align: center;
  color: #001f3f;
  cursor: pointer;
  font-size: 0.9em;
  text-decoration: underline;
  margin-top: 5px;
  transition: color 0.3s;
}
.forgot-link:hover { color: #000; }

/* Chat Styles */
.chat-header {
  background: linear-gradient(135deg, #001f3f, #000000, #d3d3d3);
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 1.2em;
  border-radius: 10px 10px 0 0;
}
.chat-body {
  flex: 1;
  background: #f5f5f5;
  padding: 15px;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  height: 350px;
  margin-bottom: 10px;
  border-radius: 0 0 10px 10px;
}
.message {
  margin: 8px 0;
  display: flex;
  opacity: 0;
  transform: translateY(20px);
  transition: 0.5s;
}
.message.show {
  opacity: 1;
  transform: translateY(0);
}
.bot-message { justify-content: flex-start; }
.user-message { justify-content: flex-end; }
.bubble {
  max-width: 70%;
  padding: 10px 15px;
  border-radius: 20px;
  font-size: 0.95em;
  line-height: 1.4;
}
.bot-message .bubble {
  background: #e0e0e0;
  color: #333;
  border-bottom-left-radius: 0;
}
.user-message .bubble {
  background: linear-gradient(135deg, #001f3f, #000000, #d3d3d3);
  color: white;
  border-bottom-right-radius: 0;
}
.input-area {
  display: flex;
  gap: 10px;
}
.input-area input {
  flex: 1;
  padding: 10px;
  border-radius: 25px;
  border: 1px solid #ccc;
  font-size: 1em;
}
.input-area button {
  width: auto;
  padding: 10px 15px;
  border-radius: 50%;
}
.role-display {
  text-align: center;
  margin-bottom: 10px;
  font-weight: bold;
}

/* Responsive */
@media (max-width: 500px) {
  .container { max-width: 95%; padding: 20px; }
  .chat-body { height: 250px; }
}
</style>
</head>
<body>

<!-- Login / Signup Page -->
<div class="container" id="login-section" style="height:550px;">
  <div id="welcome-text">Welcome to ChatbotğŸ¤–</div>
  <div class="error" id="login-error"></div>

  <div class="toggle-buttons">
    <button id="login-tab" class="active" onclick="showTab('login')">Login</button>
    <button id="signup-tab" onclick="showTab('signup')">Sign Up</button>
  </div>

  <!-- Login Form -->
  <div id="login-form">
    <input type="email" id="login-email" placeholder="Enter your email" />
    <input type="password" id="login-password" placeholder="Enter your password" />
    <button onclick="handleLogin()">Login</button>
    <div class="forgot-link" onclick="showForgotPassword()">Forgot my password?</div>
  </div>

  <!-- Signup Form -->
  <div id="signup-form" class="hidden">
    <input type="email" id="signup-email" placeholder="Enter your email" />
    <input type="password" id="signup-password" placeholder="Enter your password" />
    <input type="password" id="signup-confirm" placeholder="Confirm password" />
    <button onclick="handleSignUp()">Sign Up</button>
  </div>
</div>

<!-- Forgot Password Page -->
<div class="container hidden" id="forgot-section" style="height:550px;">
  <div id="welcome-text">Forgot Password ğŸ”</div>
  <p style="text-align:center; margin-bottom:15px;">Enter your registered email address below:</p>
  <input type="email" id="forgot-email" placeholder="Enter your email" />
  <button onclick="handleForgotPassword()">Submit</button>
  <div class="forgot-link" onclick="backToLogin()">â† Back to Login</div>
  <div class="error" id="forgot-message" style="color:green; font-weight:bold; margin-top:10px;"></div>
</div>

<!-- Role Selection Page -->
<div class="container hidden" id="role-section">
  <h2>Select Your Role</h2>
  <select id="role-select">
    <option value="">-- Select Role --</option>
    <option value="public">Public</option>
    <option value="student">Student</option>
    <option value="faculty">Faculty</option>
    <option value="admin">Admin</option>
  </select>
  <button onclick="selectRole()">Continue</button>
</div>

<!-- Chat Page -->
<div class="container hidden" id="chat-section">
  <div class="chat-header">ğŸ’¬ Ayan - Campus Chatbot</div>
  <div class="role-display" id="role-display"></div>
  <div class="chat-body" id="chat-box">
    <div class="bot-message message show">
      <div class="bubble">Hi, I'm Ayan your campus assistant. How can I help you?</div>
    </div>
  </div>
  <div class="input-area">
    <input type="text" id="user-input" placeholder="Type your message..." />
    <button onclick="sendMessage()">â¤</button>
  </div>
</div>

<script>
let user = { email: "", password: "", role: "" };

// Toggle Tabs
function showTab(tab) {
  const loginBtn = document.getElementById("login-tab");
  const signupBtn = document.getElementById("signup-tab");
  const loginForm = document.getElementById("login-form");
  const signupForm = document.getElementById("signup-form");
  if (tab === "login") {
    loginBtn.classList.add("active");
    signupBtn.classList.remove("active");
    loginForm.classList.remove("hidden");
    signupForm.classList.add("hidden");
  } else {
    signupBtn.classList.add("active");
    loginBtn.classList.remove("active");
    signupForm.classList.remove("hidden");
    loginForm.classList.add("hidden");
  }
}

// Forgot Password Functions
function showForgotPassword() {
  transitionPage("login-section", "forgot-section");
}
function backToLogin() {
  transitionPage("forgot-section", "login-section");
}
function handleForgotPassword() {
  const email = document.getElementById("forgot-email").value.trim();
  const msg = document.getElementById("forgot-message");
  if (!email || !email.includes("@")) {
    msg.style.color = "red";
    msg.textContent = "Please enter a valid registered email.";
    return;
  }
  msg.style.color = "green";
  msg.textContent = "âœ… A link is sent to your email, reset your password using the link.";
  setTimeout(() => {
    msg.textContent = "";
    backToLogin();
  }, 3000);
}

// Login Function
function handleLogin() {
  const email = document.getElementById("login-email").value.trim();
  const password = document.getElementById("login-password").value.trim();
  const error = document.getElementById("login-error");
  if (!email.includes("@")) { error.textContent = "Please enter a valid email."; return; }
  if (!password) { error.textContent = "Please enter your password."; return; }
  user.email = email; user.password = password; error.textContent = "";
  transitionPage("login-section", "role-section");
}

// Sign Up
function handleSignUp() {
  const email = document.getElementById("signup-email").value.trim();
  const pass = document.getElementById("signup-password").value.trim();
  const confirm = document.getElementById("signup-confirm").value.trim();
  const error = document.getElementById("login-error");
  if (!email.includes("@")) { error.textContent = "Please enter a valid email."; return; }
  if (!pass || !confirm) { error.textContent = "Please fill all fields."; return; }
  if (pass !== confirm) { error.textContent = "Passwords do not match."; return; }
  user.email = email; user.password = pass; error.textContent = "";
  transitionPage("login-section", "role-section");
}

// Page Transition
function transitionPage(fromId, toId) {
  document.getElementById(fromId).classList.add("hidden");
  document.getElementById(toId).classList.remove("hidden");
}

// Role Selection
function selectRole() {
  const role = document.getElementById("role-select").value;
  if (!role) { alert("Please select a role."); return; }
  user.role = role;
  document.getElementById("role-display").textContent = `Role: ${role}`;
  transitionPage("role-section", "chat-section");
}

// Chat Logic
function sendMessage() {
  const input = document.getElementById("user-input");
  const text = input.value.trim();
  if (!text) return;
  appendMessage("user", text);
  input.value = "";
  const reply = generateReply(text.toLowerCase());
  typeBotMessage(reply);
}

function appendMessage(sender, text) {
  const chatBox = document.getElementById("chat-box");
  const msg = document.createElement("div");
  msg.classList.add("message", sender==="user"?"user-message":"bot-message");
  const bubble = document.createElement("div"); bubble.classList.add("bubble");
  bubble.textContent = text; msg.appendChild(bubble);
  chatBox.appendChild(msg); setTimeout(()=>msg.classList.add("show"),50);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function typeBotMessage(text) {
  const chatBox = document.getElementById("chat-box");
  const msg = document.createElement("div"); msg.classList.add("message","bot-message");
  const bubble = document.createElement("div"); bubble.classList.add("bubble"); msg.appendChild(bubble);
  chatBox.appendChild(msg);
  let i=0; const interval=setInterval(()=>{
    bubble.textContent+=text.charAt(i); i++; chatBox.scrollTop = chatBox.scrollHeight;
    if(i>=text.length) clearInterval(interval);
  },30);
  setTimeout(()=>msg.classList.add("show"),50);
}

function generateReply(msg){
  if(msg.includes("ayan")) return `Yes ${user.email.split('@')[0]}, Iâ€™m here ğŸ˜Š`;
  if(msg.includes("fee")) return user.role==="student"?"ğŸ’° Your semester fee is â‚¹45,000.":"ğŸ”’ Fee details are private.";
  if(msg.includes("attendance")) return user.role==="student"?"ğŸ“Š Your attendance is 87%":"âš ï¸ Only students/faculty can view attendance.";
  if(msg.includes("library")) return "ğŸ“š Library hours: Monâ€“Fri 8:30â€“7, Sat 9â€“2.";
  if(msg.includes("course")) return "ğŸ“ We offer B.Tech, B.Sc, MBA, and more programs.";
  if(msg.includes("hostel")) return "ğŸ  Hostel queries: contact warden office.";
  if(msg.includes("admin")) return user.role==="admin"?"ğŸ—‚ï¸ Admin access verified.":"ğŸš« Admin rights needed.";
  return "ğŸ¤– Iâ€™m Ayan. You can ask about fees, attendance, library, hostel, or course info.";
}
</script>
</body>
</html>
